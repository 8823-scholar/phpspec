#!/usr/bin/env bash 

set -e

echo "--> Checking for composer and box."
for i in "composer box"; do
    # command -v will return >0 when the $i is not found
    command -v $i >/dev/null && continue || { echo "$i command not found."; exit 1; }
done

echo "--> Removing vendor direction in order to provide a clean build."
rm -Rfv vendor

echo "--> Installing composer dependencies with --no-dev in order to not pollute build with unneeded code."
composer install --no-dev

echo "--> Running box build."
box build

echo "--> Success!"
